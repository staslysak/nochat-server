/*! For license information please see 6.42819da4.chunk.js.LICENSE.txt */
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{110:function(e,t,a){"use strict";a.r(t);var n=a(62);a.d(t,"default",(function(){return n.a}))},190:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},201:function(e,t,a){"use strict";var n=a(190);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),c=(0,n(a(202)).default)(r.default.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.default=c},202:function(e,t,a){"use strict";var n=a(190);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=c.default.memo(c.default.forwardRef((function(t,a){return c.default.createElement(o.default,(0,r.default)({ref:a},t),e)})));0;return a.muiName=o.default.muiName,a};var r=n(a(203)),c=n(a(0)),o=n(a(110))},203:function(e,t){function a(){return e.exports=a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},a.apply(this,arguments)}e.exports=a},204:function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var c=typeof n;if("string"===c||"number"===c)e.push(n);else if(Array.isArray(n)&&n.length){var o=r.apply(null,n);o&&e.push(o)}else if("object"===c)for(var i in n)a.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},225:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(67),o=a(52),i=a(16),s=a(29),l=a(46),d=a(79),u=a(32),p=a(184),f=a(167),b=a(169),g=a(89),m=a(48),h=a(164),v=Object(h.a)((function(e){return{ChatWindow:{position:"relative",height:"100%",display:"flex",flexDirection:"column"},ChatWindow_input_wrapper:{alignSelf:"flex-end",display:"flex",alignItems:"center",width:"100%",borderTop:"1px solid ".concat(e.palette.divider),"& .MuiInputBase-root":{fontSize:e.typography.body2.fontSize}},ChatWindow_input:{minHeight:64,padding:"".concat(e.spacing(1),"px ").concat(e.spacing(1.5),"px ").concat(e.spacing(.5),"px ").concat(e.spacing(2),"px"),"& .MuiInputBase-inputMultiline":{"&::-webkit-scrollbar":{display:"none"}}},ChatWindow_empty:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},ChatWindow_content:{display:"flex",flexDirection:"column",height:"100%",maxHeight:"calc(100% - 64px)",overflow:"auto",background:"transparent",padding:e.spacing(2),"&::-webkit-scrollbar":{width:5,background:"transparent","&-thumb":{background:"dark"===e.palette.type?e.lighten(e.palette.background.default,.235):e.darken(e.palette.background.default,.057),borderRadius:3*e.shape.borderRadius,display:"none"}},"&:hover::-webkit-scrollbar-thumb":{display:"block"}}}})),y=a(5),j=a(186),x=a(179),O=a(201),w=a.n(O),k=function(e){var t=e.onClick,a=Object(y.a)(e,["onClick"]),n=v();return r.a.createElement("div",{className:n.ChatWindow_input_wrapper},r.a.createElement(j.a,Object.assign({autoFocus:!0,fullWidth:!0,multiline:!0,rowsMax:5},a,{placeholder:"Write a message...",className:n.ChatWindow_input})),r.a.createElement(x.a,{onClick:t,disabled:!a.value.trim().length},r.a.createElement(w.a,null)))},M=function(e){var t=e.chatId,a=e.children,n=e.onSendMessage,c=e.subscribeToNewMessage,o=v(),i=r.a.createRef(),l=r.a.useState(""),d=Object(s.a)(l,2),u=d[0],p=d[1],f=r.a.useCallback((function(){i.current&&(i.current.scrollTop=i.current.scrollHeight)}),[i]);r.a.useEffect((function(){var e=function(){};return t&&(e=c(t)),function(){e(t)}}),[t]),r.a.useEffect((function(){f()}),[i,f]);var b=function(){u.trim().length&&n(u),p("")};return r.a.createElement("div",{className:o.ChatWindow},r.a.createElement("div",{className:o.ChatWindow_content,ref:i},a),r.a.createElement(k,{value:u,onChange:function(e){return p(e.target.value)},onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b())},onClick:b}))},E=a(18),_=a(66),C=a(204),I=a.n(C),N=a(206),W=a(2),D=(a(8),a(7)),S=a(9),T=r.a.forwardRef((function(e,t){var a,n=e.classes,c=e.className,o=e.component,i=void 0===o?"li":o,s=e.disableGutters,l=void 0!==s&&s,d=e.role,u=void 0===d?"menuitem":d,p=e.selected,b=e.tabIndex,g=Object(y.a)(e,["classes","className","component","disableGutters","role","selected","tabIndex"]);return e.disabled||(a=void 0!==b?b:-1),r.a.createElement(f.a,Object(W.a)({button:!0,role:u,tabIndex:a,component:i,selected:p,disableGutters:l,classes:{dense:n.dense},className:Object(D.a)(n.root,c,p&&n.selected,!l&&n.gutters),ref:t},g))})),R=Object(S.a)((function(e){return{root:Object(W.a)({},e.typography.body1,Object(E.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(W.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(T),B=function(e){var t=e.anchorEl,a=e.onClose,n=e.onDelete;return r.a.createElement(N.a,{anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:a},r.a.createElement(R,{dense:!0,onClick:function(){n(),a()}},"Delete"))},P=Object(h.a)((function(e){return{Message:{display:"flex",position:"relative",maxWidth:"70%",padding:"".concat(e.spacing(1),"px ").concat(e.spacing(1.5),"px ").concat(e.spacing(.5),"px"),borderRadius:3*e.shape.borderRadius,"&:before":{position:"absolute",bottom:-1,width:15,height:20,content:"''"},"& p":{alignSelf:"flex-end",wordWrap:"break-word",overflowWrap:"break-word",paddingBottom:e.spacing(2),minWidth:20},"& span":{alignSelf:"flex-end",opacity:.54}},Message_content:{display:"flex",margin:"".concat(e.spacing(1),"px 0")},Message_content_receiver:{justifyContent:"flex-start"},Message_content_sender:{justifyContent:"flex-end"},Message_receiver:{background:"dark"===e.palette.type?e.lighten(e.palette.background.default,.235):e.darken(e.palette.background.default,.057),"&:before":{left:-10,transform:"rotate(-15deg)",borderBottom:"15px solid ".concat("dark"===e.palette.type?e.lighten(e.palette.background.default,.235):e.darken(e.palette.background.default,.057)),borderLeft:"15px solid transparent"}},Message_sender:{background:e.palette.secondary.dark,color:e.palette.getContrastText(e.palette.secondary.dark),"&:before":{right:-10,transform:"rotate(15deg)",borderBottom:"15px solid ".concat(e.palette.secondary.dark),borderRight:"15px solid transparent"}}}})),H=function(e){var t,a,n=e.isOwner,o=e.text,i=e.createdAt,d=Object(y.a)(e,["isOwner","text","createdAt"]),p=P(),f=r.a.useState(null),b=Object(s.a)(f,2),g=b[0],m=b[1],h=Object(u.a)(l.a),v=Object(s.a)(h,1)[0];return r.a.createElement("div",{className:I()(p.Message_content,(t={},Object(E.a)(t,p.Message_content_sender,n),Object(E.a)(t,p.Message_content_receiver,!n),t))},r.a.createElement("div",{onContextMenu:function(e){e.preventDefault(),m(e.currentTarget)},className:I()(p.Message,(a={},Object(E.a)(a,p.Message_sender,n),Object(E.a)(a,p.Message_receiver,!n),a))},r.a.createElement(_.a,{variant:"body2"},o),r.a.createElement(_.a,{variant:"caption"},Object(c.a)(i))),r.a.createElement(B,{anchorEl:g,onClose:function(){return m(null)},onDelete:function(){return v({variables:{messageId:d.id}})}}))},A=Object(h.a)((function(e){return{DirectFallback:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}})),z=function(){var e=A();return r.a.createElement("div",{className:e.DirectFallback},r.a.createElement(_.a,{variant:"body2"},"No messages here yet..."))},F=Object(h.a)((function(){return{DirectChat_header:{width:"100%",paddingLeft:0,paddingRight:0}}})),G=function(e){var t=e.user,a=e.show,n=e.directId,o=e.directUser,i=e.directMessages,s=e.subscribeToMore,l=e.onCreateMessage,d=F(),u=r.a.useMemo((function(){return i?i.map((function(e){return r.a.createElement(H,Object.assign({key:e.id},e,{isOwner:e.user.id===t.id}))})):r.a.createElement(z,null)}),[i]);return r.a.createElement(g.a,{show:a,header:r.a.createElement(f.a,{dense:!0,className:d.DirectChat_header},r.a.createElement(b.a,{primary:o.username,primaryTypographyProps:{component:"div"},secondary:"last seen ".concat(Object(c.a)(o.createdAt)),secondaryTypographyProps:{variant:"caption"}}),r.a.createElement(m.a,{src:o.avatar,alt:o.username}))},r.a.createElement(M,{chatId:n,onSendMessage:l,subscribeToNewMessage:s},u))},L=function(e){var t=e.userId,a=Object(u.c)(l.e),n=Object(p.a)(a,"data.user",{}),c=Object(u.c)(l.b,{variables:{userId:t}}),f=Object(p.a)(c,"data.direct.direct",{}),b=Object(p.a)(c,"data.direct.recipient",{}),g=Object(u.b)(d.a),m=Object(s.a)(g,1)[0],h=Object(u.b)(d.b),v=Object(s.a)(h,1)[0];return r.a.createElement(G,{show:!!t,user:n,subscribeToMore:function(e){return c.subscribeToMore({document:l.d,variables:{chatId:e},updateQuery:function(e,t){var a=t.subscriptionData;return a.data?{direct:Object(i.a)({},e.direct,{direct:Object(i.a)({},e.direct.direct,{messages:[].concat(Object(o.a)(e.direct.direct.messages),[a.data.newMessage])})})}:e}})},onCreateMessage:function(e){f?v({variables:{text:e,chatId:f.id}}):m({variables:{userId:b.id,text:e}})},directId:f.id,directUser:b,directMessages:f.messages})};t.default=function(e){var t=Object(c.b)(e.location).p;return r.a.createElement(L,{userId:t})}}}]);
//# sourceMappingURL=6.42819da4.chunk.js.map