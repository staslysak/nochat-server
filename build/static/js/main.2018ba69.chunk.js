(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{111:function(e,n,t){"use strict";t.d(n,"b",(function(){return m})),t.d(n,"a",(function(){return O}));var r=t(18),a=t(56),c=t(134),i=t(124),o=t(19),u=t(133),s=t(125),d=t(3),l=t(68),f=t(62),b=t(23),p=new c.a({uri:"".concat("https://testio-app.herokuapp.com","/graphql")}),m=new i.a({uri:"".concat("ws://testio-app.herokuapp.com","/graphql"),options:{reconnect:!0,connectionParams:function(){var e=b.a.get(),n=e.token,t=e.refreshToken;return console.log("connectionParams token",n),console.log("connectionParams refreshToken",t),{headers:{"x-token":n,"x-refresh-token":t}}}}}),h=new o.a((function(e,n){return n(e).map((function(n){var t=e.getContext().response.headers,r=t.get("x-token"),a=t.get("x-refresh-token");return r&&a&&b.a.set({token:r,refreshToken:a}),n}))})),g=new o.a((function(e,n){return e.setContext((function(e){var n=e.headers,t=b.a.get(),a=t.token,c=t.refreshToken;return{headers:Object(r.a)({},n,{"x-token":a,"x-refresh-token":c})}})),n(e)})),v=Object(s.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&n.forEach((function(e){var n=e.message,t=e.locations,r=e.path,a=e.extensions;console.log("[GraphQL error]: \n          Message: ".concat(n,", \n          Location: ").concat(t,", \n          Path: ").concat(r)),["UNAUTHENTICATED"].includes(a.code)&&l.a.dispatch(Object(f.c)())})),t&&console.log("[Network error]: ".concat(t))})).concat(h.concat(g.concat(p))),y=Object(o.d)((function(e){var n=e.query,t=Object(d.l)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),m,v),O=new a.a({link:y,cache:new u.a})},117:function(e,n,t){"use strict";t.d(n,"b",(function(){return h})),t.d(n,"a",(function(){return g})),t.d(n,"c",(function(){return v}));var r=t(18),a=t(30),c=t.n(a),i=t(57),o=t(16),u=t(0),s=t.n(u),d=t(25),l=t(35),f=t(41),b=t(183),p=t(68),m=t(62),h=function(){var e=Object(d.c)(l.c),n=Object(d.c)(l.d),t=Object(d.a)(l.f),r=Object(d.b)(f.j),a=Object(o.a)(r,1)[0],u=Object(d.b)(f.i),s=Object(o.a)(u,1)[0],b=Object(d.b)(f.c),h=Object(o.a)(b,1)[0],g=Object(d.b)(f.f,{onCompleted:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return e.next=4,p.a.dispatch(Object(m.c)());case 4:return e.next=6,O.resetStore();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),v=Object(o.a)(g,2),y=v[0],O=v[1].client;return{queries:{user:e,directs:n},lazyQueries:{searchUsers:t},mutations:{logout:y,connect:a,disconnect:s,deleteDirect:h}}},g=function(e){var n=e.userId,t=Object(d.c)(l.c),r=Object(d.c)(l.b,{variables:{userId:n}}),a=Object(d.a)(l.a,{fetchPolicy:"network-only"}),c=Object(d.b)(f.a),i=Object(o.a)(c,1)[0],u=Object(d.b)(f.b),s=Object(o.a)(u,1)[0],b=Object(d.b)(f.d),p=Object(o.a)(b,1)[0],m=Object(d.b)(f.g),h=Object(o.a)(m,1)[0],g=Object(d.b)(f.k);return{queries:{currentUser:t,currentDirect:r},lazyQueries:{chatMessages:a},mutations:{createDirect:i,createMessage:s,deleteMessage:p,readMessage:h,userTyping:Object(o.a)(g,1)[0]}}},v=function(e,n){var t=s.a.useState(!1),a=Object(o.a)(t,2),u=a[0],d=a[1],l=s.a.useState(""),f=Object(o.a)(l,2),p=f[0],m=f[1],h=Object(b.a)(function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!1),e.next=3,n(t);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),1e3),g=Object(o.a)(h,1)[0];return[{user:p,setUser:m},function(){var t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d(!0),u){t.next=4;break}return t.next=4,n(e);case 4:g(Object(r.a)({},e,{username:""}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()]}},119:function(e,n,t){"use strict";var r=t(44),a=t(0),c=t.n(a),i=t(212),o=Object(i.a)((function(e){return{Typing:{display:"inline-flex",justifyContent:"space-between",alignItems:"center",color:e.palette.text.secondary,"& span":{width:5,height:5,marginRight:4,background:e.palette.text.secondary,borderRadius:"50%","&:nth-child(1)":{animation:"$animation 1s ease-in-out infinite 0s"},"&:nth-child(2)":{animation:"$animation 1s ease-in-out infinite 0.2s"},"&:nth-child(3)":{animation:"$animation 1s ease-in-out infinite 0.4s"}}},Typing_secondary:{color:e.palette.secondary[200],"& span":{background:e.palette.secondary[200]}},"@keyframes animation":{"0%, 100%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(.8)",opacity:.5}}}})),u=t(106),s=t.n(u);n.a=function(e){var n=o();return c.a.createElement("span",{className:s()(n.Typing,Object(r.a)({},n.Typing_secondary,"secondary"===e.variant))},c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null),"typing")}},142:function(e,n,t){e.exports=t(179)},179:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(10),i=t(26),o=t(111),u=t(227),s=t(132),d=t(89),l=t(90),f=t(101),b=window.matchMedia("(prefers-color-scheme: dark)").matches,p=Object(s.a)({palette:{type:b?"dark":"light",primary:d.a,secondary:l.a},props:{sidebar:280,sidebarMin:150,classes:{ellipsis:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}},lighten:f.lighten,darken:f.darken}),m=t(76),h=t(68),g=t(55),v=t(46),y=t(226),O=t(129),j=t.n(O),k=t(52),I=t(225),E=t(212),w=t(44),x=t(30),T=t.n(x),M=t(108),S=t(57),D=t(18),$=t(16),C=t(35),_=t(59),N=t(23),U=t(223),A=t(232),z=t(224),L=t(183),q=Object(E.a)((function(e){return{Sidebar:{position:"relative",width:"100%",maxWidth:e.props.sidebar,minWidth:e.props.sidebarMin},Sidebar_main:{position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"dark"===e.palette.type?e.palette.action.selected:e.palette.action.hover,borderRight:"1px solid ".concat(e.palette.divider)},Sidebar_header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(3),"px"),minHeight:64},Sidebar_searchbar:{background:e.palette.action.selected,padding:"0 ".concat(e.spacing(1),"px"),fontSize:e.typography.body2.fontSize,minHeight:32,marginLeft:e.spacing(1),borderRadius:e.shape.borderRadius},Sidebar_content:{height:"100%",maxHeight:"calc(100% - 64px)",overflowY:"scroll",position:"relative","&::-webkit-scrollbar":{display:"none"}}}})),P=t(217),Q=t(218),H=t(182),R=t(219),W=t(91),F=t(229),G=t(64),B=t(216),J=Object(E.a)((function(e){return{MenuDrawer:{position:"absolute",width:"95%",height:"100%",zIndex:e.zIndex.tooltip,backgroundImage:"linear-gradient(90deg, ".concat(e.palette.background.default,", ").concat(e.palette.background.paper,")"),borderRight:"1px solid ".concat(e.palette.divider)},MenuDrawer_listItem:{"& p":{width:"100%",marginLeft:e.spacing(2)},"&:last-child p":{color:e.palette.error.dark,marginLeft:0}},MenuDrawer_backdrop:{width:"100%",maxWidth:960,zIndex:1300,left:"auto",right:"auto"}}})),Y=[{title:"Settings",link:"/settings",action:function(e){return e.onToggle},icon:a.a.createElement(B.a,null)}],K=a.a.memo((function(e){var n=e.open,t=e.user,r=Object(k.a)(e,["open","user"]),c=J();return a.a.createElement(a.a.Fragment,null,a.a.createElement(P.a,{in:n,direction:"right"},a.a.createElement("div",{className:c.MenuDrawer},a.a.createElement(Q.a,null,a.a.createElement(H.a,null,a.a.createElement(G.a,{src:t.avatar,alt:t.username,online:t.online})),a.a.createElement(H.a,null,a.a.createElement(R.a,{primary:t.username,secondary:t.email}))),a.a.createElement(Q.a,null,Y.map((function(e){var n=e.title,t=e.link,i=e.action,o=e.icon;return a.a.createElement(H.a,{key:n,button:!0,to:t,className:c.MenuDrawer_listItem,component:t?v.b:"div",onClick:i?i(r):void 0},o,a.a.createElement(W.a,{variant:"body2",align:o?"left":"center"},n))})),a.a.createElement(H.a,{button:!0,className:c.MenuDrawer_listItem,component:"div",onClick:r.onLogout},a.a.createElement(W.a,{variant:"body2",align:"center"},"Log Out"))))),a.a.createElement(F.a,{open:n,onClick:r.onToggle,className:c.MenuDrawer_backdrop}))})),V=t(220),X=Object(E.a)((function(e){return{UserItem_primary:Object(D.a)({},e.props.classes.ellipsis),UserItem_secondary:Object(D.a)({},e.props.classes.ellipsis,{color:e.palette.secondary[200]})}})),Z=function(e){var n=X();return a.a.createElement(H.a,Object.assign({},e,{dense:!0,button:!0,to:e.link,component:v.b}),a.a.createElement(V.a,null,a.a.createElement(G.a,{src:e.user.avatar,alt:e.user.username,online:e.user.online})),a.a.createElement(R.a,{primary:e.user.username,primaryTypographyProps:{component:"div",className:n.UserItem_primary},secondary:"@".concat(e.user.username),secondaryTypographyProps:{variant:"caption",component:"div",className:n.UserItem_secondary}}))},ee=t(215),ne=Object(E.a)((function(e){return{ChatItem_badge_root:{height:15},ChatItem_badge_badge:{position:"relative",transform:"none",height:"inherit"},ChatItem_primary:{display:"flex"},ChatItem_secondary:{display:"flex",alignItems:"center"},ChatItem_primaryText:Object(D.a)({width:"100%"},e.props.classes.ellipsis),ChatItem_secondaryText:Object(D.a)({width:"100%",marginRight:e.spacing(1)},e.props.classes.ellipsis)}})),te=t(119),re=function(e){var n=e.link,t=e.date,r=e.avatar,c=e.online,i=e.unread,o=e.typing,u=void 0!==o&&o,s=e.selected,d=e.primary,l=e.secondary,f=e.onContextMenu,b=Object(k.a)(e,["link","date","avatar","online","unread","typing","selected","primary","secondary","onContextMenu"]),p=ne();return a.a.createElement(H.a,Object.assign({dense:!0,button:!0,to:n,component:v.b,selected:s,onContextMenu:f},b),a.a.createElement(V.a,null,a.a.createElement(G.a,{src:r,alt:d,online:c})),a.a.createElement(R.a,{primary:a.a.createElement(a.a.Fragment,null,a.a.createElement(W.a,{variant:"body2",className:p.ChatItem_primaryText},d),a.a.createElement(W.a,{variant:"caption",color:"textSecondary"},Object(N.c)(t))),primaryTypographyProps:{className:p.ChatItem_primary,component:"div"},secondary:a.a.createElement(a.a.Fragment,null,a.a.createElement(W.a,{variant:"caption",className:p.ChatItem_secondaryText},u?a.a.createElement(te.a,null):l),a.a.createElement(ee.a,{max:50,classes:{badge:p.ChatItem_badge_badge,root:p.ChatItem_badge_root},badgeContent:i,color:"secondary"})),secondaryTypographyProps:{className:p.ChatItem_secondary,component:"div"}}))},ae=t(192),ce=t(221),ie=function(e){var n,t=e.anchorEl,r=e.onClose,c=e.onDelete;return a.a.createElement(ae.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},open:Boolean(t),onClose:r},a.a.createElement(ce.a,{dense:!0,onClick:(n=c,function(){n(),r()})},"Delete chat"))},oe=function(e){a.a.useEffect((function(){var n=e.subscribeToUserTyping(e.direct.id);return function(){return n()}}),[]),a.a.useEffect((function(){var n=e.subscribeToDeleteMessage(e.direct.id);return function(){return n()}}),[]),a.a.useEffect((function(){var n=e.subscribeToNewMessage(e.direct.id);return function(){return n()}}),[]);var n=a.a.useState(null),t=Object($.a)(n,2),r=t[0],c=t[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(re,{link:e.link,typing:e.typing,selected:e.selected,avatar:e.user.avatar,online:e.user.online,unread:e.direct.unread,primary:e.user.username,secondary:e.direct.lastMessage.text,date:e.direct.lastMessage.createdAt,onContextMenu:function(e){e.preventDefault(),c(e.currentTarget)}}),a.a.createElement(ie,{anchorEl:r,onClose:function(){return c(null)},onDelete:function(){e.onDelete(e.direct.id)}}))},ue=t(222),se=Object(E.a)((function(e){return{StyledList:{},StyledList_subheader:{background:e.palette.action.selected,lineHeight:"32px",fontSize:e.typography.body2.fontSize}}})),de=function(e){var n=se();return a.a.createElement(Q.a,Object.assign({},e,{subheader:e.subheader?a.a.createElement(ue.a,{component:"div",className:n.StyledList_subheader},e.subheader):null}))},le=function(e){var n=q(),t=a.a.useState(!1),r=Object($.a)(t,2),c=r[0],i=r[1],o=a.a.useState(""),u=Object($.a)(o,2),s=u[0],d=u[1];a.a.useEffect((function(){d("")}),[e.chatId]),a.a.useEffect((function(){var n=e.subscribeToNewDirect();return function(){return n()}}),[]),a.a.useEffect((function(){var n=e.subscribeToDeleteDirect();return function(){return n()}}),[]),a.a.useEffect((function(){var n=e.subscribeToOnlineUsers();return console.log("subscribeToOnlineUsers"),function(){return n()}}),[e.subscribeToOnlineUsers]),a.a.useEffect((function(){e.onConnect(),window.addEventListener("beforeunload",(function(n){return n.preventDefault(),e.onDisconnect()}))}),[]);var l=Object(L.a)((function(n){return e.onSearch(n)}),200),f=Object($.a)(l,1)[0],b=function(){return i(!c)};return a.a.createElement("div",{className:n.Sidebar},a.a.createElement(K,{open:c,user:e.currentUser,onLogout:e.onLogout,onToggle:b}),a.a.createElement("div",{className:n.Sidebar_main},a.a.createElement("div",{className:n.Sidebar_header},a.a.createElement(U.a,{edge:"start",color:"inherit",onClick:b},a.a.createElement(z.a,null)),a.a.createElement(A.a,{fullWidth:!0,size:"small",value:s,placeholder:"Search",className:n.Sidebar_searchbar,onChange:function(e){d(e.target.value),f(e.target.value)}})),a.a.createElement("div",{className:n.Sidebar_content},s.length?function(e){return e?a.a.createElement(de,{subheader:"Global search"},e.map((function(e){return a.a.createElement(Z,{key:e.id,user:e,link:"/?p=".concat(e.id),onClick:function(){return d("")}})}))):null}(e.users):e.directs.map((function(n){return a.a.createElement(oe,{key:n.id,direct:n,user:n.user,typing:e.typings[n.id]===n.user.username?e.typings[n.id]:"",link:"/?p=".concat(n.user.id),selected:n.user.id===e.chatId,onDelete:e.onDeleteDirect,subscribeToUserTyping:e.subscribeToUserTyping,subscribeToNewMessage:e.subscribeToNewMessage,subscribeToDeleteMessage:e.subscribeToDeleteMessage})})))))},fe=t(228),be=t(117),pe=a.a.memo((function(e){var n=Object(be.b)(),t=n.queries,r=t.user,c=t.directs,i=Object($.a)(n.lazyQueries.searchUsers,2),o=i[0],u=i[1],s=n.mutations,d=s.logout,l=s.connect,f=s.disconnect,b=s.deleteDirect,p=Object(N.e)(e.location).p,m=a.a.useState({}),h=Object($.a)(m,2),g=h[0],v=h[1];return a.a.createElement(le,{chatId:p,typings:g,directs:Object(fe.a)(c,"data.directs",[]).sort(N.g),users:Object(fe.a)(u,"data.users"),currentUser:Object(fe.a)(r,"data.currentUser",{}),directslength:Object(fe.a)(c,"data.directs.length"),onLogout:d,onConnect:l,onSearch:function(e){return o({variables:{username:e}})},onDisconnect:f,onDeleteDirect:function(e){b({variables:{id:e}})},subscribeToNewDirect:function(){return c.subscribeToMore({document:_.c,updateQuery:function(e,n){var t=n.subscriptionData;if(!t.data)return e;var r=t.data.newDirect;return{directs:e.directs.concat(r).sort(N.g)}}})},subscribeToNewMessage:function(e){return c.subscribeToMore({document:_.d,variables:{chatId:e},updateQuery:function(n,t){var a=t.subscriptionData;if(!a.data)return n;var c=a.data.newMessage,i=Object(fe.a)(r,"data.currentUser"),o=c.userId!==i.id?1:0;return{directs:n.directs.map((function(n){return n.id===e&&(n=Object(D.a)({},n,{lastMessage:c,unread:n.unread+o})),n})).sort(N.g)}}})},subscribeToDeleteDirect:function(){return c.subscribeToMore({document:_.a,updateQuery:function(){var e=Object(S.a)(T.a.mark((function e(n,t){var r,a,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.subscriptionData).data){e.next=3;break}return e.abrupt("return",n);case 3:return a=r.data.deleteDirect,i=n.directs.filter((function(e){return e.id!==a.id})),c.client.writeQuery({query:C.d,data:{directs:i}}),e.abrupt("return",{directs:i});case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()})},subscribeToDeleteMessage:function(e){return c.subscribeToMore({document:_.b,variables:{chatId:e},updateQuery:function(){var n=Object(S.a)(T.a.mark((function n(t,a){var i,o,u;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=a.subscriptionData).data){n.next=3;break}return n.abrupt("return",t);case 3:return o=Object(fe.a)(r,"data.currentUser"),u=i.data.deleteMessage,n.next=7,c.client.query({query:C.e,variables:{chatId:e},fetchPolicy:"no-cache"}).then((function(e){var n=e.data,r=Object(M.a)(t.directs).map((function(e){var t=u.userId!==o.id?1:0;return e.lastMessage.id===u.id&&(e=Object(D.a)({},e,{lastMessage:n.directLastMessage,unread:e.unread-t})),e}));return c.client.writeQuery({query:C.d,data:{directs:r}}),{directs:r}}));case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()})},subscribeToOnlineUsers:function(){return c.subscribeToMore({document:_.e})},subscribeToUserTyping:function(e){return c.subscribeToMore({document:_.f,variables:{chatId:e},updateQuery:function(n,t){var r=t.subscriptionData;if(!r.data)return n;var a=r.data.userTyping;return v(Object(D.a)({},g,Object(w.a)({},e,a))),n}})}})})),me=Object(E.a)((function(e){return{container:{display:"flex",overflow:"hidden",padding:0,minHeight:"100vh",maxHeight:"100vh"},contentShift:{width:"100%",background:e.palette.background.paper,minWidth:e.props.sidebarMin}}})),he=Object(g.g)((function(e){var n=e.children,t=Object(k.a)(e,["children"]),r=me();return a.a.createElement(I.a,{maxWidth:"md",className:r.container},a.a.createElement(pe,t),a.a.createElement("div",{className:r.contentShift},n))})),ge=function(e){return j()({loader:e,loading:function(e){return e.error&&console.error(e.error),null}})},ve=[{path:"/",exact:!1,component:ge((function(){return t.e(4).then(t.bind(null,251))}))},{path:"/verify",exact:!0,component:ge((function(){return t.e(0).then(t.bind(null,247))}))}],ye=[{path:"/(|registration)",exact:!0,component:ge((function(){return Promise.all([t.e(5),t.e(6)]).then(t.bind(null,248))}))},{path:"/verify",exact:!0,component:ge((function(){return t.e(0).then(t.bind(null,247))}))},{path:"*",component:g.a}],Oe=Object(m.b)((function(e){return{isAuthorized:e.auth.isAuthorized}}))((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(y.a,null),a.a.createElement(v.a,null,Object(N.d)()?a.a.createElement(he,null,ve.map((function(e){return a.a.createElement(g.b,Object.assign({key:e.path},e))}))):a.a.createElement(g.d,null,ye.map((function(e){return a.a.createElement(g.b,Object.assign({key:e.path},e))})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(c.render)(a.a.createElement(i.a,{client:o.a},a.a.createElement(m.a,{store:h.a},a.a.createElement(u.a,{theme:p},a.a.createElement(Oe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},23:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"e",(function(){return d})),t.d(n,"d",(function(){return l})),t.d(n,"g",(function(){return f})),t.d(n,"b",(function(){return b})),t.d(n,"c",(function(){return p})),t.d(n,"f",(function(){return m}));t(18);var r=t(88),a=t.n(r),c=t(97),i=t.n(c),o=t(98),u=t.n(o),s={get:function(){return{token:localStorage.getItem("token"),refreshToken:localStorage.getItem("refreshToken")}},set:function(e){var n=e.token,t=e.refreshToken;localStorage.setItem("token",n),localStorage.setItem("refreshToken",t)},remove:function(){localStorage.removeItem("token"),localStorage.removeItem("refreshToken")}},d=function(e){return a.a.parse(e.search,{arrayFormat:"comma",skipNull:!0,parseNumbers:!0})},l=function(){var e=s.get(),n=e.token,t=e.refreshToken;try{u()(n);var r=u()(t).exp;if(Date.now()/1e3>r)return!1}catch(a){return!1}return!0},f=function(e,n){return n.lastMessage.createdAt-e.lastMessage.createdAt},b=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"days";return i()().diff(+e,n)},p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:mm";if(e)return i()(+e).format(n)},m=function(e){switch(b(+e)){case 0:return"Today";case 1:return"Yesterday";default:return p(e,"MMMM D")}}},35:function(e,n,t){"use strict";t.d(n,"f",(function(){return f})),t.d(n,"c",(function(){return b})),t.d(n,"d",(function(){return p})),t.d(n,"b",(function(){return m})),t.d(n,"e",(function(){return h})),t.d(n,"a",(function(){return g}));var r=t(12),a=t(13),c=t.n(a);function i(){var e=Object(r.a)(["\n  query getChatMessages($chatId: Int!, $offset: Int) {\n    messages(chatId: $chatId, offset: $offset) {\n      id\n      text\n      userId\n      unread\n      createdAt\n    }\n  }\n"]);return i=function(){return e},e}function o(){var e=Object(r.a)(["\n  query directLastMessage($chatId: Int!) {\n    directLastMessage(chatId: $chatId) {\n      id\n      text\n      userId\n      createdAt\n    }\n  }\n"]);return o=function(){return e},e}function u(){var e=Object(r.a)(["\n  query currentDirect($userId: Int!) {\n    currentDirect(userId: $userId) {\n      direct {\n        id\n      }\n      recipient {\n        id\n        email\n        avatar\n        online\n        username\n        lastSeen\n        createdAt\n      }\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=Object(r.a)(["\n  query directs {\n    directs {\n      id\n      user {\n        id\n        email\n        avatar\n        online\n        username\n        lastSeen\n        createdAt\n      }\n      lastMessage {\n        id\n        text\n        userId\n        createdAt\n      }\n      unread\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=Object(r.a)(["\n  query currentUser {\n    currentUser {\n      id\n      email\n      avatar\n      online\n      username\n      createdAt\n    }\n  }\n"]);return d=function(){return e},e}function l(){var e=Object(r.a)(["\n  query users($username: String) {\n    users(username: $username) {\n      id\n      email\n      avatar\n      online\n      username\n      lastSeen\n      createdAt\n    }\n  }\n"]);return l=function(){return e},e}var f=c()(l()),b=c()(d()),p=c()(s()),m=c()(u()),h=c()(o()),g=c()(i())},41:function(e,n,t){"use strict";t.d(n,"h",(function(){return v})),t.d(n,"e",(function(){return y})),t.d(n,"l",(function(){return O})),t.d(n,"a",(function(){return j})),t.d(n,"b",(function(){return k})),t.d(n,"d",(function(){return I})),t.d(n,"c",(function(){return E})),t.d(n,"g",(function(){return w})),t.d(n,"f",(function(){return x})),t.d(n,"j",(function(){return T})),t.d(n,"i",(function(){return M})),t.d(n,"k",(function(){return S}));var r=t(12),a=t(13),c=t.n(a);function i(){var e=Object(r.a)(["\n  mutation userTyping($chatId: Int!, $username: String) {\n    userTyping(chatId: $chatId, username: $username)\n  }\n"]);return i=function(){return e},e}function o(){var e=Object(r.a)(["\n  mutation disconnect {\n    disconnect {\n      id\n    }\n  }\n"]);return o=function(){return e},e}function u(){var e=Object(r.a)(["\n  mutation connect {\n    connect {\n      id\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=Object(r.a)(["\n  mutation logout {\n    logout\n  }\n"]);return s=function(){return e},e}function d(){var e=Object(r.a)(["\n  mutation readMessage($id: Int!) {\n    readMessage(id: $id)\n  }\n"]);return d=function(){return e},e}function l(){var e=Object(r.a)(["\n  mutation deleteDirect($id: Int!) {\n    deleteDirect(id: $id)\n  }\n"]);return l=function(){return e},e}function f(){var e=Object(r.a)(["\n  mutation deleteMessage($id: Int!) {\n    deleteMessage(id: $id)\n  }\n"]);return f=function(){return e},e}function b(){var e=Object(r.a)(["\n  mutation createMessage($chatId: Int, $text: String!) {\n    createMessage(chatId: $chatId, text: $text)\n  }\n"]);return b=function(){return e},e}function p(){var e=Object(r.a)(["\n  mutation createDirect($userId: Int!, $text: String) {\n    createDirect(userId: $userId, text: $text) {\n      id\n    }\n  }\n"]);return p=function(){return e},e}function m(){var e=Object(r.a)(["\n  mutation verifyUser($secret: String!) {\n    verifyUser(secret: $secret) {\n      token\n      refreshToken\n    }\n  }\n"]);return m=function(){return e},e}function h(){var e=Object(r.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      token\n      refreshToken\n    }\n  }\n"]);return h=function(){return e},e}function g(){var e=Object(r.a)(["\n  mutation register($username: String!, $email: String!, $password: String!) {\n    register(username: $username, email: $email, password: $password)\n  }\n"]);return g=function(){return e},e}var v=c()(g()),y=c()(h()),O=c()(m()),j=c()(p()),k=c()(b()),I=c()(f()),E=c()(l()),w=c()(d()),x=c()(s()),T=c()(u()),M=c()(o()),S=c()(i())},59:function(e,n,t){"use strict";t.d(n,"d",(function(){return f})),t.d(n,"b",(function(){return b})),t.d(n,"a",(function(){return p})),t.d(n,"c",(function(){return m})),t.d(n,"e",(function(){return h})),t.d(n,"f",(function(){return g}));var r=t(12),a=t(13),c=t.n(a);function i(){var e=Object(r.a)(["\n  subscription userTyping($chatId: Int!) {\n    userTyping(chatId: $chatId)\n  }\n"]);return i=function(){return e},e}function o(){var e=Object(r.a)(["\n  subscription onlineUser {\n    onlineUser {\n      id\n      online\n      lastSeen\n    }\n  }\n"]);return o=function(){return e},e}function u(){var e=Object(r.a)(["\n  subscription newDirect {\n    newDirect {\n      id\n      user {\n        id\n        email\n        avatar\n        online\n        username\n        lastSeen\n        createdAt\n      }\n      lastMessage {\n        id\n        text\n        userId\n        unread\n        createdAt\n      }\n      unread\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=Object(r.a)(["\n  subscription deleteDirect {\n    deleteDirect {\n      id\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=Object(r.a)(["\n  subscription deleteMessage($chatId: Int!) {\n    deleteMessage(chatId: $chatId) {\n      id\n      userId\n    }\n  }\n"]);return d=function(){return e},e}function l(){var e=Object(r.a)(["\n  subscription newMessage($chatId: Int!) {\n    newMessage(chatId: $chatId) {\n      id\n      text\n      userId\n      unread\n      createdAt\n    }\n  }\n"]);return l=function(){return e},e}var f=c()(l()),b=c()(d()),p=c()(s()),m=c()(u()),h=c()(o()),g=c()(i())},62:function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return d}));var r,a=t(44),c=t(18),i=t(136),o=t(185),u=t(23),s=Object(i.a)({DISPATCH_LOGIN:function(e){return{token:e.token,refreshToken:e.refreshToken}}}).dispatchLogin,d=Object(i.a)({DISPATCH_LOGOUT:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{isAuthorized:e}}}).dispatchLogout,l=Object(o.a)((r={},Object(a.a)(r,s,(function(e,n){var t=n.payload;return u.a.set(t),Object(c.a)({},e,{isAuthorized:!0})})),Object(a.a)(r,d,(function(e,n){var t=n.payload.isAuthorized;return u.a.remove(),Object(c.a)({},e,{isAuthorized:t})})),r),{isAuthorized:!1});n.a=l},64:function(e,n,t){"use strict";var r=t(52),a=t(0),c=t.n(a),i=t(215),o=t(230),u=t(9),s=t(212),d=Object(s.a)((function(e){return{Avatar:{fontSize:e.typography.body1.fontSize,textTransform:"uppercase",color:e.palette.common.white}}})),l=Object(u.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(i.a);n.a=function(e){var n=e.alt,t=void 0===n?"":n,a=e.src,i=Object(r.a)(e,["alt","src"]),u=d(),s=t.split(" ").slice(0,2).map((function(e){return e[0]})).join("");return c.a.createElement(l,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",invisible:!i.online},c.a.createElement(o.a,{src:a,className:u.Avatar,style:{background:a}},s))}},68:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var r=t(50),a=t(120),c=t(62),i=Object(r.combineReducers)({auth:c.a}),o=Object(r.createStore)(i,{},Object(a.composeWithDevTools)(r.applyMiddleware.apply(void 0,[])))}},[[142,2,3]]]);
//# sourceMappingURL=main.2018ba69.chunk.js.map