(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[2],{131:function(e,n,t){"use strict";t.r(n);var r=t(1),o=t.n(r),a=t(34),c=t(136),i=t(65),u=t(153),s=t(90),l=t(47),f=t(48),h=t(57),d=window.matchMedia("(prefers-color-scheme: dark)").matches,m=Object(s.a)({palette:{type:d?"dark":"light",primary:l.a,secondary:f.a},props:{sidebar:280,sidebarMin:150,classes:{ellipsis:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}},lighten:h.lighten,darken:h.darken}),p=t(39),g=t(77),k=t(26),v=t(62),b=t(150),w=t(88),O=t.n(w),E=t(20),T=function(e){return O()({loader:e,loading:function(e){return e.error&&console.error(e.error),null}})},j=[{path:"/me",exact:!1,component:T((function(){return Promise.all([t.e(0),t.e(1),t.e(5),t.e(7)]).then(t.bind(null,242))}))},{path:"/(login|registration)",exact:!0,component:T((function(){return Promise.all([t.e(0),t.e(1),t.e(6),t.e(8)]).then(t.bind(null,237))}))},{path:"/verify",exact:!0,component:T((function(){return Promise.all([t.e(0),t.e(9)]).then(t.bind(null,240))}))},{path:"*",component:function(){return o.a.createElement(k.a,{to:Object(E.d)()?"/me":"/login"})}}],y=Object(p.b)((function(e){return{isAuthorized:e.auth.isAuthorized}}))((function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,null),o.a.createElement(v.a,null,o.a.createElement(k.d,null,j.map((function(e){return o.a.createElement(k.b,Object.assign({key:e.path},e))})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(a.render)(o.a.createElement(c.a,{client:i.a},o.a.createElement(p.a,{store:g.a},o.a.createElement(u.a,{theme:m},o.a.createElement(y,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},20:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"e",(function(){return l})),t.d(n,"d",(function(){return f})),t.d(n,"h",(function(){return h})),t.d(n,"b",(function(){return d})),t.d(n,"c",(function(){return m})),t.d(n,"f",(function(){return p})),t.d(n,"g",(function(){return g}));t(23);var r=t(46),o=t.n(r),a=t(54),c=t.n(a),i=t(55),u=t.n(i),s={get:function(){return{token:localStorage.getItem("token"),refreshToken:localStorage.getItem("refreshToken")}},set:function(e){var n=e.token,t=e.refreshToken;localStorage.setItem("token",n),localStorage.setItem("refreshToken",t)},remove:function(){localStorage.removeItem("token"),localStorage.removeItem("refreshToken")}},l=function(e){return o.a.parse(e.search,{arrayFormat:"comma",skipNull:!0,parseNumbers:!0})},f=function(){var e=s.get(),n=e.token,t=e.refreshToken;try{u()(n);var r=u()(t).exp;if(Date.now()/1e3>r)return!1}catch(o){return!1}return!0},h=function(e,n){return n.lastMessage.createdAt-e.lastMessage.createdAt},d=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"days";return c()().diff(+e,n)},m=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:mm";if(e)return c()(+e).format(n)},p=function(e){switch(d(+e)){case 0:return"Today";case 1:return"Yesterday";default:return m(e,"MMMM D")}},g=function(e){var n={};return e.length&&e.forEach((function(e,t){var r=e.createdAt,o=d(r,"days");void 0===n[o]&&(n[o]=t)})),n}},63:function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return l}));var r,o=t(30),a=t(23),c=t(93),i=t(134),u=t(20),s=Object(c.a)({DISPATCH_LOGIN:function(e){return{token:e.token,refreshToken:e.refreshToken}}}).dispatchLogin,l=Object(c.a)({DISPATCH_LOGOUT:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{isAuthorized:e}}}).dispatchLogout,f={isAuthorized:!!localStorage.getItem("token")},h=Object(i.a)((r={},Object(o.a)(r,s,(function(e,n){var t=n.payload;return u.a.set(t),Object(a.a)({},e,{isAuthorized:!0})})),Object(o.a)(r,l,(function(e,n){var t=n.payload.isAuthorized;return u.a.remove(),Object(a.a)({},e,{isAuthorized:t})})),r),f);n.a=h},65:function(e,n,t){"use strict";t.d(n,"b",(function(){return d})),t.d(n,"a",(function(){return v}));var r=t(23),o=t(74),a=t(92),c=t(81),i=t(5),u=t(91),s=t(83),l=t(2),f=t(20),h=new a.a({uri:"".concat("https://floating-sierra-09967.herokuapp.com","/graphql")}),d=new c.a({uri:"".concat("wss://floating-sierra-09967.herokuapp.com","/graphql"),options:{reconnect:!0,connectionParams:function(){var e=f.a.get(),n=e.token,t=e.refreshToken;return console.log("connectionParams token",n),console.log("connectionParams refreshToken",t),{"x-token":n,"x-refresh-token":t}}}}),m=new i.a((function(e,n){return n(e).map((function(n){var t=e.getContext().response.headers,r=t.get("x-token"),o=t.get("x-refresh-token");return r&&o&&f.a.set({token:r,refreshToken:o}),n}))})),p=new i.a((function(e,n){return e.setContext((function(e){var n=e.headers,t=f.a.get(),o=t.token,a=t.refreshToken;return{headers:Object(r.a)({},n,{"x-token":o,"x-refresh-token":a})}})),n(e)})),g=Object(s.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&n.forEach((function(e){var n=e.message,t=e.locations,r=e.path,o=e.extensions;console.log("[GraphQL error]: \n          Message: ".concat(n,", \n          Location: ").concat(t,", \n          Path: ").concat(r)),["UNAUTHENTICATED","INTERNAL_SERVER_ERROR"].includes(o.code)})),t&&console.log("[Network error]: ".concat(t))})).concat(m.concat(p.concat(h))),k=Object(i.d)((function(e){var n=e.query,t=Object(l.l)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),d,g),v=new o.a({link:k,cache:new u.a})},77:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r=t(24),o=t(87),a=t(63),c=Object(r.combineReducers)({auth:a.a}),i=Object(r.createStore)(c,{},Object(o.composeWithDevTools)(r.applyMiddleware.apply(void 0,[])))},95:function(e,n,t){e.exports=t(131)}},[[95,3,4]]]);
//# sourceMappingURL=main.dd2bc809.chunk.js.map